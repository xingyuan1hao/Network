①ARP（Address Resolution Protocol）即地址解析协议， 用于实现从 IP 地址到 MAC 地址的映射，即询问目标IP对应的MAC地址。

 

②在网络通信中，主机和主机通信的数据包需要依据OSI模型从上到下进行数据封装，当数据封装完整后，再向外发出。所以在局域网的通信中，不仅需要源目IP地址的封装，也需要源目MAC的封装。

 

③一般情况下，上层应用程序更多关心IP地址而不关心MAC地址，所以需要通过ARP协议来获知目的主机的MAC地址，完成数据封装。

总结 :网络层以上的协议用IP地址来标识网络接口，但以太数据帧传输时，以物理地址来标识网络接口。因此我们需要进行IP地址与物理地址之间的转化。
对于IPv4来说，我们使用ARP地址解析协议来完成IP地址与物理地址的转化（IPv6使用邻居发现协议进行IP地址与物理地址的转化，它包含在ICMPv6中）。 
ARP协议提供了网络层地址（IP地址）到物理地址（mac地址）之间的动态映射。ARP协议 是地址解析的通用协议


ARP帧以以太帧的形式存在，即ARP消息包含在以太帧中 ，因此包含以太帧的首部和尾部。（这里不考虑802.1p/q等特殊以太帧）。
* 帧类型*：用来向收到数据报的主机表示该数据报的类型，常见类型如下： 
0800:IP数据报； 
0806:ARP请求/应答数据报； 
8035:RAPP请求/应答； 

ARP Request or Reply Message 是ARP帧的核心部分。 

前14字节是以太网首部帧格式 ,然后后面四个字段描述了本ARP帧涉及的硬件类型和协议类型。 
Hard Type：该字段占2个字节，指定硬件地址类型， 如值为1表示为以太网地址。 
Prot Type ：该字段占2个字节，指定协议地址类型，如0x0800 表示协议地址类型为IPv4地址。该值与以太帧首部的类型字段相同。 
Hard Size： 表示硬件地址的大小（单位：字节），如以太网地址为6。
Prot Size ： 表示协议地址的大小（单位：字节）， 如IPv4地址大小为4。（硬件地址长度和协议地址长度，分别占1个字节，指出硬件地址和协议地址的长度，以字节为单位。）

OP ： 表示ARP的消息类型。 
    1：ARP Request； 
    2：ARP Reply 
    3：RARP Request 
    4：RARP Reply

后面四个字段写入的是一些物理地址和协议地址。不一定全部有值。 
对于ARP Request 而言，我们不知道目的MAC地址是什么，因此 Target’s Hardware Address 全部填充为0.
